<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Pacifico|Shadows+Into+Light" rel="stylesheet">
    <link href="slider.css" rel="stylesheet" type="text/css">
    <link href="canvas.css" rel="stylesheet" type="text/css">
</head>
<body>
<style>
    .button{
        font-style: oblique;
        font-size: 20px;
        cursor: pointer; /*changes the mouse cursor when hovered over.*/
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
        border: black;
        background-color: #2E2E2E;
        margin: 20px;
        color: white;
        width: 300px;
        height: 40px;
        border-radius: 30px; /* Used to make the shape curved*/
    }
    body {
        background-image: url(Photos/background.png);
        font-family: 'Pacifico', cursive;
        font-size: 30px;
        color: white;

    }


</style>
<h1 style="text-align: center">Slideshow:</h1>
<div style="text-align: center"><button class="button" onclick="myCanvas(); startSlideshow(); style.display = 'none'">Start Slideshow</button></div>
<canvas  id="myCanvas" width="1500" height="1050"
        style="border:1px solid #d3d3d3;text-align: center;">
    Your browser does not support the HTML5 canvas tag.</canvas>
<div id="Caption" style="text-align: center; margin: 10px">
    <h1></h1>
</div>
<div style="text-align: center">
    <button id="previous" class="button" onclick="previousPhoto();">Previous</button>
    <button id="next" class="button" onclick="nextPhoto();">Next</button>
    <br>
</div>

<div style="text-align: right; margin: 20px;">Automatic Transitions
    <!-- Rounded switch -->
    <label class="switch">
        <input checked id= status type="checkbox" onclick="transitions();">
        <span class="slider round"></span>
    </label>

</div>

<div style="text-align: right; margin: 20px;">Random Mode
    <!-- Rounded switch -->
    <label class="switch">
        <input id= randomMode type="checkbox" onclick="randomTransitions();">
        <span class="slider round"></span>
    </label>

</div>


<script>
    var slideShowStatus = document.getElementById("status");
    console.log("default "+slideShowStatus.checked);
    imagesJSON = {captions:["This is my fav company","this is my fav artist","This is me playing against Saskatoon Blades","Close up shot of my mask"],
        images:["Photos/Apple.png","Photos/eminem.jpg","Photos/saskatoon.JPG","Photos/mask.JPG"]};
    myJSON = JSON.stringify(imagesJSON);
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var index = 0;
    var length = imagesJSON.images.length;
    var intervalID;
    function startSlideshow(){
       intervalID = setInterval(nextPhoto, 5000);
    }
    function startRandomSlideshow(){
        intervalID = stopSlideshow();
        intervalID = setInterval(nextRandomPhoto, 5000);
    }
    function stopSlideshow(){
        clearInterval(intervalID);
    }
    function transitions() {
        slideShowStatus = document.getElementById("status");
        //console.log(slideShowStatus.checked+" before");
        if(slideShowStatus.checked == false){
            stopSlideshow(intervalID);
            //console.log(slideShowStatus.checked +" off section");
        }
        if(slideShowStatus.checked == true){
            startSlideshow(intervalID);
            //console.log(slideShowStatus+" on section");
        }

    }
    function randomTransitions() {
        var randomStatus = document.getElementById("randomMode");
        console.log(randomStatus.checked+" this is random status" +slideShowStatus.checked + "this is slideshow status");
        if(randomStatus.checked == false && slideShowStatus.checked==false){
            stopSlideshow(intervalID);//stop all slideshows
            console.log(slideShowStatus.checked +" random to all off");
            document.getElementById("previous").disabled = false;
            document.getElementById("next").disabled = false;
        }
        if(randomStatus.checked == false && slideShowStatus.checked ==true){
            stopSlideshow(intervalID); // stop the random slideshow
            startSlideshow(intervalID); //start the regular slideshow
            console.log(slideShowStatus.checked +" random to sequential");
            document.getElementById("previous").disabled = false;
            document.getElementById("next").disabled = false;
        }
        if(randomStatus.checked == true){
            startRandomSlideshow(intervalID);
            document.getElementById("previous").disabled = true;
            document.getElementById("next").disabled = true;
            //console.log(slideShowStatus+" on section");
        }

    }
    function myCanvas() {
        var currentPhoto = imagesJSON.images[index];
        var currentCaption = imagesJSON.captions[index];
        var img = new Image();
        img.src = currentPhoto;
        document.getElementById("Caption").innerHTML = currentCaption;
        ctx.drawImage(img,canvas.width / 2 - img.width / 2,
            canvas.height / 2 - img.height / 2);
    }

    function nextPhoto(){
        if (index != length-1){ // needs to be length of array
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            index ++;
            myCanvas();
        }
    }

    function previousPhoto() {
        if (index != 0){
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            index --;
            myCanvas();
        }
    }

    function nextRandomPhoto() {
        console.log("is this running?");
        index = Math.random() * (length-1);
        index = Math.round(index);
        console.log(index + " this is index" );
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        myCanvas();
    }
</script>

</body>
</html>